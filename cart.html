<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="format-detection" content="telephone=no" />
<meta name="x5-fullscreen" content="true">
<meta name="full-screen" content="yes">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link href="css/bootstrap.min.css" type="text/css" rel="stylesheet">
<link href="font/iconfont.css" type="text/css" rel="stylesheet">
<link href="css/style.css" type="text/css" rel="stylesheet">
<link href="css/common.css" rel="stylesheet" type="text/css">
<script src="js/jquery-1.9.1.min.js" type="text/javascript" ></script>
<script src="js/layer_mobile/layer.js" type="text/javascript"></script>
<script src="js/bootstrap.min.js" type="text/javascript"></script>
<script src="js/common.js" type="text/javascript"></script>
<script  type="text/javascript" src="js/number-divider.min.js"></script>
<title>购物车</title>
</head>
<body>
<!--herder top-->
<header class="herder-style clearfix">
<!--navbar-->
	<div class="herder-top">
	    <div class="return"><a href="javascript :history.back(-1)"><i class="iconfont icon-fanhui"></i></a></div>
		<div class="title_name align">购物车</div>
		<div class="herder-operating">
			<div class="Language-style dropdown">
			 <a  class="relative clearfix" href="#" id="Language" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		     <span class="name" ><i class="iconfont icon-duoyuyan"></i><b>Language</b></span>
		<!--<i class="iconfont icon-jiantouarrow492 jiantou zk"></i>
 <i class="iconfont icon-jiantouarrow486 jiantou yc"></i>-->
			</a>
			 <div class="dropdown-menu Language-select" aria-labelledby="dLabel" data-thumb-target="temp">
			 <h4 class="align padding5">Please select a language.</h4>
			 <ul class="language_list">
			 	<li><a href="#"><i class="iconfont icon-icon-test"></i>日本語</a></li>
			 	<li><a href="#">中文简</a></li>
			 	<li><a href="#">中文繁</a></li>
			 	<li><a href="#">English</a></li>
			 	<li><a href="#">한국의</a></li>
			 </ul>
			 </div>
			</div>
			<div class="operating-style dropdown"  >
			<a class="iconfont icon-101 caozuo"  href="#" id="caozuo" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></a>
		     <ul class="dropdown-menu" aria-labelledby="dLabel" data-thumb-target="temp">
		      <li><a href="javascript:" onclick="share()"><i class="iconfont icon-fenxiang2"></i>シェア</a></li>
			  <li><a href="#"><i class="iconfont icon-setting"></i>設定</a></li>
		     </ul>
	     </div>
	    </div>
	 </div>
	<!--menu-->
	<div class="herder-menu">
<ul>
			<li class="home active"><a href="index.html" class="relative"><i class="iconfont icon-shop2"></i><span class="name">首页</span></a></li>
			<li class="cart"><a href="cart.html" class="relative"><i class="iconfont icon-gouwuche1"><b class="cart-mark"></b></i><span class="name">购物车</span></a></li>
			<li class="order"><a href="Order.html"><i class="iconfont icon-dingdan"></i><span class="name">订单</span></a></li>
			<li class="pay"><a href="javascript:void(0)" onClick="Paybtn('Pay.html')"><i class="iconfont icon-yinxingqia-copy"></i><span class="name">结算</span></a></li>
			<li class="user"><a href="javascript:void(0)" onClick="qita()"><i class="iconfont icon-yonghu"></i><span class="name">用户</span></a></li>
		</ul>
	</div>
</header>
<!--Content area-->
 <section class="container pages_style">
  <div class="cart-style">
  	<table class="table cart-list">
  	 <tbody>
  		<tr>
  		<td width="10%"><div class="checkbox"><label><input type="checkbox" value="" checked="checked" name="checkboxName"><i class="iconfont "></i></label></div>
		</td>
  		<td width="40%"><span class="name">季節の漬物盛合せ</span></td>
  		<td><span class="price">¥<b class="amount">500</b></span></td>
  		<td>	
		 <div class="Quantity">  
			    <button class="minus" style="display: inline-block;" onClick="reducew(this)"><em class="iconfont icon-jian"></em> </button>  
			  <span class="result">1</span>
			  <input type="hidden" value="99" class="none">
			<button class="add" onClick="plusw(this)"><em class="iconfont icon-jia"></em></button> 
		 </div>
		</td>
  		</tr>
  		  <tr>
  		<td width="10%"><div class="checkbox"><label><input type="checkbox" value="" checked="checked" name="checkboxName"><i class="iconfont "></i></label></div>
		</td>
  		<td width="40%"><span class="name" onClick="product_name(this,'活〆極上ノルウェーサーモンのカルパッチョ(ガーリック風味)')">推荐参加新年派对★选择饮料，您可以选择</span></td>
  		<td><span class="price">¥<b class="amount">450</b></span></td>
  		<td>	
		 <div class="Quantity">  
		    <button class="minus" style="display: inline-block;" onClick="reducew(this)"><em class="iconfont icon-jian"></em> </button>  
			  <span class="result">1</span>
			  <input type="hidden" value="99" class="none">
			<button class="add" onClick="plusw(this)"><em class="iconfont icon-jia"></em></button>  
		 </div>
		</td>
  		</tr>
  		  <tr>
  		<td width="10%"><div class="checkbox"><label><input type="checkbox" value="" checked="checked" name="checkboxName"><i class="iconfont "></i></label></div>
		</td>
  		<td width="40%"><span class="name">推荐参加新年派对★选择饮料，您可以选择</span></td>
  		<td><span class="price">¥<b class="amount">1,560</b></span></td>
  		<td>	
		 <div class="Quantity">  
		    <button class="minus" style="display: inline-block;" onClick="reducew(this)"><em class="iconfont icon-jian"></em> </button>  
			  <span class="result">1</span>
			  <input type="hidden" value="99" class="none">
			<button class="add" onClick="plusw(this)"><em class="iconfont icon-jia"></em></button>  
		 </div>
		</td>
  		</tr>
  		 		  <tr>
  		<td width="10%"><div class="checkbox"><label><input type="checkbox" value="" checked="checked" name="checkboxName"><i class="iconfont "></i></label></div>
		</td>
  		<td width="40%"><span class="name">推荐参加新年派对★选择饮料，您可以选择</span></td>
  		<td><span class="price">¥<b class="amount">1,560</b></span></td>
  		<td>	
		 <div class="Quantity">  
		    <button class="minus" style="display: inline-block;" onClick="reducew(this)"><em class="iconfont icon-jian"></em> </button>  
			  <span class="result">1</span>
			  <input type="hidden" value="99" class="none">
			<button class="add" onClick="plusw(this)"><em class="iconfont icon-jia"></em></button>  
		 </div>
		</td>
  		</tr>
  		 		  <tr>
  		<td width="10%"><div class="checkbox"><label><input type="checkbox" value="" checked="checked" name="checkboxName"><i class="iconfont "></i></label></div>
		</td>
  		<td width="40%"><span class="name">推荐参加新年派对★选择饮料，您可以选择</span></td>
  		<td><span class="price">¥<b class="amount">1,560</b></span></td>
  		<td>	
		 <div class="Quantity">  
		    <button class="minus" style="display: inline-block;" onClick="reducew(this)"><em class="iconfont icon-jian"></em> </button>  
			  <span class="result">1</span>
			  <input type="hidden" value="99" class="none">
			<button class="add" onClick="plusw(this)"><em class="iconfont icon-jia"></em></button>  
		 </div>
		</td>
  		</tr>
  		 		  <tr>
  		<td width="10%"><div class="checkbox"><label><input type="checkbox" value="" checked="checked" name="checkboxName"><i class="iconfont "></i></label></div>
		</td>
  		<td width="40%"><span class="name">推荐参加新年派对★选择饮料，您可以选择</span></td>
  		<td><span class="price">¥<b class="amount">1,560</b></span></td>
  		<td>	
		 <div class="Quantity">  
		    <button class="minus" style="display: inline-block;" onClick="reducew(this)"><em class="iconfont icon-jian"></em> </button>  
			  <span class="result">1</span>
			  <input type="hidden" value="99" class="none">
			<button class="add" onClick="plusw(this)"><em class="iconfont icon-jia"></em></button>  
		 </div>
		</td>
  		</tr>
  		 		  <tr>
  		<td width="10%"><div class="checkbox"><label><input type="checkbox" value="" checked="checked" name="checkboxName"><i class="iconfont "></i></label></div>
		</td>
  		<td width="40%"><span class="name">推荐参加新年派对★选择饮料，您可以选择</span></td>
  		<td><span class="price">¥<b class="amount">1,560</b></span></td>
  		<td>	
		 <div class="Quantity">  
		    <button class="minus" style="display: inline-block;" onClick="reducew(this)"><em class="iconfont icon-jian"></em> </button>  
			  <span class="result">1</span>
			  <input type="hidden" value="99" class="none">
			<button class="add" onClick="plusw(this)"><em class="iconfont icon-jia"></em></button>  
		 </div>
		</td>
  		</tr>
  		 		  <tr>
  		<td width="10%"><div class="checkbox"><label><input type="checkbox" value="" checked="checked" name="checkboxName"><i class="iconfont "></i></label></div>
		</td>
  		<td width="40%"><span class="name">推荐参加新年派对★选择饮料，您可以选择</span></td>
  		<td><span class="price">¥<b class="amount">1,560</b></span></td>
  		<td>	
		 <div class="Quantity">  
		    <button class="minus" style="display: inline-block;" onClick="reducew(this)"><em class="iconfont icon-jian"></em> </button>  
			  <span class="result">1</span>
			  <input type="hidden" value="99" class="none">
			<button class="add" onClick="plusw(this)"><em class="iconfont icon-jia"></em></button>  
		 </div>
		</td>
  		</tr>
  		 		  <tr>
  		<td width="10%"><div class="checkbox"><label><input type="checkbox" value="" checked="checked" name="checkboxName"><i class="iconfont "></i></label></div>
		</td>
  		<td width="40%"><span class="name">推荐参加新年派对★选择饮料，您可以选择</span></td>
  		<td><span class="price">¥<b class="amount">1,560</b></span></td>
  		<td>	
		 <div class="Quantity">  
		    <button class="minus" style="display: inline-block;" onClick="reducew(this)"><em class="iconfont icon-jian"></em> </button>  
			  <span class="result">1</span>
			  <input type="hidden" value="99" class="none">
			<button class="add" onClick="plusw(this)"><em class="iconfont icon-jia"></em></button>  
		 </div>
		</td>
  		</tr>
  		
  	 </tbody>
  	</table>
  </div>
 </section>
 <!---->
 <div class="footer-style">
 	<div class="Subtotal" id="total_price">合计：¥<b class="price">0</b></div>
 	<a href="cart-confirm.html" class="btn cart-btn width35">确认</a>
 </div>
</body>
</html>
<script>

/*****************************************/ 
var noX = 0;
//	
function toThousands(num) {
    var num = (num || 0).toString(),
        result = '';
    while (num.length > 3) {
        result = ',' + num.slice(-3) + result;
        num = num.slice(0, num.length - 3);
    }
    if (num) {
        result = num + result;
    }
    return result;
}
/* 减  */
function reduceMod(e, totalH, mod, noX) {
    var tn = e.parent().parent().parent().next().siblings().find(".amount").text();
    var tn1 = e.parent().parent().parent().next().siblings().find(".result").text();
    if (mod != 2) {
        var Total = parseFloat(totalH.replace(/,|\s/g, '')) - (tn.replace(/,|\s/g, '') * tn1);
        var sz = Total.toFixed();
        $("#total_price b").text(toThousands(Total));
    } else {
        /* 合计加单价-1 */
        var Total = parseFloat(totalH.replace(/,|\s/g, '')) - parseFloat(tn.replace(/,|\s/g, ''));
        $("#total_price b").text(toThousands(Total));
    }
};
/* 加  */
function plusMod(e, totalH, mod) {
    var tn = e.parent().parent().parent().next().siblings().find(".amount").text();
    var tn1 = e.parent().parent().parent().next().siblings().find(".result").text();
    if (mod != 2) {
        //var name=totalH.divide();
        var Total = parseFloat(totalH.replace(/,|\s/g, '')) + (tn.replace(/,|\s/g, '') * tn1);
        $("#total_price b").text(toThousands(Total));
    } else {
        /* 合计加单价+1 */
        var Total = parseFloat(totalH.replace(/,|\s/g, '')) + (parseFloat(tn.replace(/,|\s/g, '')) + (noX - 1));
        $("#total_price b").text(TtoThousands(Total));
    }
};
//checkbox Selected products
$("input[name='checkboxName']").on('click', function() {
    var totalH = $("#total_price b").text(); /* 合計金額  */
    var checkeds = $(this).prop("checked");
    var quantity = $(this).parent().parent().parent().parent().find(".result").text(); /* 全部商品数量  */
    if (checkeds) {
        plusMod($(this), totalH);
        var name = $(this);
		if(quantity==0){
			 $(this).parent().parent().parent().parent().css({ "color": "#bbbbbb"});
			  $(this).parent().parent().parent().parent().find("button em").css({"color": "#bbbbbb"})
		}else{
			 $(this).parent().parent().parent().parent().css({"color": ""});
		}
        $(this).parent().parent().parent().parent().find("button").removeAttr('disabled');
		$(this).parent().parent().parent().parent().find("button em").css({"color": "#333333"})
    } else {
        reduceMod($(this), totalH, 0, noX);
        $(this).parent().parent().parent().parent().css({"color": "#bbbbbb"});
        $(this).parent().parent().parent().parent().find("button").attr('disabled', 'true');
		$(this).parent().parent().parent().parent().find("button em").css({"color": "#bbbbbb"})
    }
    Inoperable();
});
/*All product prices*/
function commodityWhole() {
    /* 合計金額  */
    toThousands();
    var univalent = $(".table .price .amount"); /* 全ての商品価格  */
    var quantity = $(".table .Quantity .result"); /* 全部商品数量  */
    var TotalJe = 0;
    for (var i = 0; i < univalent.length; i++) {
        var n = univalent.eq(i).text();
        var n1 = quantity.eq(i).text();
        TotalJe = TotalJe + (parseFloat(n.replace(/,|\s/g, '')) * parseFloat(n1));
		
		if(n1!=0){$(".Quantity .minus").find("em").eq(i).css("color", "#000000");}
		
		else{
			$(".Quantity .minus").find("em").eq(i).css("color", "#dddddd");
		}
    }
    var name = $("#total_price b").text(toThousands(TotalJe)); /* 合计金额  */
    Inoperable();
};
function Inoperable() {
    var totalH = $("#total_price b").text();
    if (totalH == 0) {
        $(".cart-btn").css("background", "#b9b9b9")
        $(".cart-btn").attr('disabled', 'true');
        $(".cart-mark").hide();
    } else {
        $(".cart-btn").css("background", "#0cca1d");
        $(".cart-btn").removeAttr('disabled');
        $(".cart-mark").show();
    }
}
/* 加减  */
function reducew(obj) {
    //减
    var $this = $(obj);
    var totalH = $("#total_price b").text(); /* 合计金额  */
    var ise = $this.siblings("span").text();
    var gc_id = $this.siblings("input").val();
    if (noX <= 0) {       
        noX = 0;
    } else {
        noX--;
    };
    if (parseInt(ise) <= 0) {		
        $this.siblings("span").text("0");
		
    } else {
        var n = parseInt(ise) - 1;
        $this.siblings("span").text(n);
		if(n==0){
			$(".Quantity .minus").find("em").css("color", "#dddddd");
			  $this.parent().parent().parent().css({"color": "#bbbbbb"});
			  $this.parent().parent().parent().find("input[name='checkboxName']").prop("checked",false);
			  $(obj).parents("tr").remove();
		}
    }
    commodityWhole();
};
function plusw(obj) {
    //加
    var $this = $(obj);
    var totalH = $("#total_price b").text(); /* 合计金额  */
    var ise = $this.siblings("span").text();
    var gc_id = $this.siblings("input").val();
    var n = parseInt(ise) + 1;
	  $this.parent().find("em").css("color", "#000000");
	  $this.parent().parent().parent().css({"color": ""});
	  $this.parent().parent().parent().find("input[name='checkboxName']").prop("checked",true)
    noX++;
    if (noX <= 1) {
        $this.parent().find("em").css("color", "#000000");
    }
    $this.siblings("span").text(n);
    commodityWhole();
}
	commodityWhole();
/**************************/
function product_name(index,name){
	layer.open({
      content:name,
		style: 'background-color:#ffffff; color:#333333; border:none;',
		time: 3,
		 success: function(){
			 $(".layui-m-layercont").css({"padding":"20px"})
		 }
});
}
function qita(){
		layer.open({
      content:'開通していない機能',
		style: 'background-color:#ffffff; color:#333333; border:none;',
		time: 3,
		 success: function(){
			 $(".layui-m-layercont").css({"padding":"20px"})
		 }
})	
}		//share
 function share(){
	 layer.open({
      type: 1,
      title: ['シェア','background-color: #000000; color:#fff; border-radius:0px; height:50px; line-height:50px'], 
      content:'<div class="share_style"><ul class="clearfix"><li><i class="iconfont icon-facebook2 "></i><h4>facebook</h4></li><li><i class="iconfont icon-twitter2"></i><h4>twitter</h4></li><li><i class="iconfont icon-big-WeChat"></i><h4>WeChat</h4></li></ul></div>',
     anim: 'up',
     style: 'position:fixed; bottom:0; left:0; width: 100%; height: 200px;  border:none;',
     success: function(layero,index){    
                    $('.layui-m-layerchild').append('<div class="share_close" onclick="layer.closeAll();"><i class="iconfont icon-quxiao"></i></div>'); 
				   
         } 
  });	 
 }
 function Paybtn(url){
	 		layer.open({
			title:['確認', 'background-color: #f0f0f0; color:#333333; height:50px; line-height:50px; text-align:left'],
			style: 'background-color:#ffffff; color:#333333; border:none; font-size:20px;',
			content:'	<div class="prompt-content mb3">お会計でよろしいでしょうか？</h5></div><div class="button-operation clearfix"><a  href="'+url+'" onclick="layer.closeAll();"  class="btn btn-confirm">はい</a><a  href="javascript:" onclick="layer.closeAll();"  class="btn btn-close">いいえ</a></div>',
			
			 success: function(layero,index){    
                    $('.layui-m-layerchild').append('<div class="share_close" onclick="layer.closeAll();"><i class="iconfont icon-quxiao" style="color:#333333"></i></div>');  
               } ,
		});
 }
 
</script>
